# Basic Bundler Example

A simple, straightforward example of JavaScript bundling using fob-core's Rust API.

## What This Example Shows

- **Single entry point bundling** - Bundle one JavaScript file and its dependencies
- **ESM output** - Modern ES module format
- **Source maps** - Debug bundled code easily
- **Minification** - Reduce file size for production
- **Build statistics** - See what was bundled

## Project Structure

```
basic-bundler/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.rs          # Rust bundler code
â”œâ”€â”€ input/
â”‚   â”œâ”€â”€ index.js         # Main entry point
â”‚   â”œâ”€â”€ utils.js         # Utility functions
â”‚   â””â”€â”€ constants.js     # App constants
â”œâ”€â”€ output/              # Generated by build
â”‚   â”œâ”€â”€ index.js         # Bundled output
â”‚   â””â”€â”€ index.js.map     # Source map
â””â”€â”€ Cargo.toml
```

## Running the Example

### Build the Bundle

```bash
cargo run
```

This will:
1. Read `input/index.js` and follow all imports
2. Bundle all modules into a single file
3. Minify the output
4. Generate source maps
5. Write to `output/index.js`

### Run the Bundled Code

```bash
node output/index.js
```

You should see:
```
ðŸš€ Basic Bundler Example v1.0.0

ðŸ‘‹ Hello, World!
ðŸ‘‹ Hello, Fob Bundler!

Sum of 1, 2, 3, 4, 5 = 15

ðŸ‘‹ Goodbye! Thanks for trying the basic bundler example.
```

## Key Concepts

### Entry Point

The **entry point** (`input/index.js`) is where bundling starts. The bundler:
1. Reads the entry file
2. Finds all `import` statements
3. Recursively processes imported files
4. Creates a dependency graph
5. Bundles everything into one file

### Output Format: ESM

**ESM (ES Modules)** is the standard JavaScript module format:
- Supported natively in modern browsers
- Supported in Node.js (with `"type": "module"` in package.json)
- Uses `import` and `export` statements
- Enables tree-shaking (removing unused code)

### Source Maps

**Source maps** let you debug bundled code:
- Map minified code back to original source
- Show original file names and line numbers in browser DevTools
- Essential for production debugging

### Minification

**Minification** reduces file size by:
- Removing whitespace and comments
- Shortening variable names
- Optimizing code structure
- Typical savings: 30-50% smaller files

## Build Configuration

The example uses these fob-core options:

```rust
BuildOptions::app(["input/index.js"])
    .runtime(runtime)
    .outdir("output")
    .format(OutputFormat::Esm)
    .sourcemap(Some(SourceMapType::File))
    .minify(true)
    .build()
    .await?
```

### Options Explained

- **`app()`** - Bundle for browser/Node.js (includes all dependencies)
- **`runtime()`** - Provides filesystem access
- **`outdir()`** - Where to write output files
- **`format()`** - Output format (ESM, CJS, or IIFE)
- **`sourcemap()`** - Generate source maps for debugging
- **`minify()`** - Compress output for production

## Next Steps

After mastering this basic example, check out:

1. **advanced-bundler** - Multiple entry points, code splitting, different formats
2. **component-library** - Building a React component library
3. **meta-framework** - File-based routing and code splitting

## Common Use Cases

This basic bundling pattern is perfect for:

- **CLI tools** - Bundle Node.js command-line apps
- **Browser scripts** - Create single-file browser bundles
- **Serverless functions** - Bundle Lambda/Cloudflare Worker code
- **Browser extensions** - Bundle extension scripts
- **Electron apps** - Bundle desktop app code

## Troubleshooting

### "Module not found" errors

Make sure all import paths are correct and files exist in the `input/` directory.

### Output file is empty

Check that the build completed successfully. Look for error messages in the console.

### Source maps not working

Ensure the source map file (`index.js.map`) is in the same directory as the bundle.

## Learn More

- [fob-core documentation](../../../crates/fob-core/)
- [Advanced bundler example](../advanced-bundler/)
- [Component library example](../component-library/)

